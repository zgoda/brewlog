{% extends "brew/base.html" %}
{% from "macros/pagination.html" import render_pagination %}

{% block headpagetitle %}warki{% endblock %}

{% block content %}
<h1>{% if public_only %}Wszystkie publiczne warki{% else %}Wszystkie warki{% endif %}</h1>
{% if pagination.items %}
<table class="table is-striped">
  <thead>
    <tr>
      <th scope="col">nazwa</th>
      <th scope="col">informacje</th>
      <th scope="col">status</th>
      <th scope="col">operacje</th>
    </tr>
  </thead>
  <tbody>
    {% for brew in pagination.items %}
    <tr>
      <td><a href="{{ url_for('brew.details', brew_id=brew.id) }}">{{ brew.full_name }}</a></td>
      <td>{% if brew.is_draft %}<strong>szkic</strong> {% endif %}{{ utils.display_info(brew) }}</td>
      {% if current_user == brew.brewery.brewer %}
      <td>{{ brew.current_state.text }}{% if brew.current_state.since %} (od {{ format_date(brew.current_state.since, 'short') }}){% endif %}</td>
      <td><a href="{{ url_for('brew.delete', brew_id=brew.id) }}" class="button is-small is-danger">usuń</a></td>
      {% else %}
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{{ render_pagination(pagination) }}
{% endif %}
{% if user_is_brewer %}
<p><a href="{{ url_for('brew.add') }}" class="btn is-primary">dodaj nową warkę</a></p>
{% endif %}
{% endblock %}
