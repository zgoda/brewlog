{% extends "base.html" %}

{% block headpagetitle %}{% trans %}Welcome{% endtrans %}{% endblock %}

{% block announcement %}
{% if announcement %}
<section class="section">
  <div class="content">
    <h1>{{ gettext('announcement').capitalize() }}</h1>
    {{ announcement|safe }}    
  </div>
</section>
{% endif %}
{% endblock %}

{% block content %}
<h2>{% trans %}Welcome to BrewLog{% endtrans %}</h2>
<div id="dashboard-block"></div>
{% endblock %}

{% block scriptdata %}
<div class="is-hidden" id="brewsets-data">{{ brewsets|tojson|safe }}</div>
{% endblock %}

{% block scripts %}
<script type="module">
  import { html, render } from '/static/js/preact.min.js';
  import { Dashboard } from '/static/js/dashboard.js';
  const brewsets = JSON.parse(document.getElementById('brewsets-data').textContent);
  render(html`<${Dashboard} brewsets=${brewsets} />`, document.getElementById('dashboard-block'));
</script>
{% endblock %}
