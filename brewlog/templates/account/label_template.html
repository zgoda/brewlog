{% extends "account/base.html" %}
{% import "macros/forms.html" as forms %}

{% block headpagetitle %}{% if template %}{{ gettext("label template %(name)s", name=template.name)|e }}{% else %}{{ gettext("new label template") }}{% endif %}{% endblock %}

{% block content %}
<h3>{% if template %}{{ gettext("label template %(name)s", name=template.name).capitalize() }}{% else %}{{ gettext("new label template").capitalize() }}{% endif %}</h3>
<form action="{% if template %}{{ url_for('profile-label_template', tid=template.id, userid=user.id) }}{% else %}{{ url_for('profile-label_template_add', userid=user.id) }}{% endif %}" method="post" class="custom">
    {{ forms.render(form) }}
</form>
<h4>{{ gettext("help for template code").capitalize() }}</h4>
<p>{% trans %}The template code must be written in Jinja2[1] template language. Available context variable is named "brew" and contains all fields from single brew data.{% endtrans %}</p>
<p>{% trans %}As an example, see the default label template:{% endtrans %}</p>
<pre>
{% raw %}
&lt;h4&gt;{{ brew.brewery.name|e }}&lt;/h4&gt;
&lt;h3&gt;{% if brew.code %}#{{ brew.code|e }} {% endif %}{{ brew.name|e }}&lt;/h3&gt;
{% if brew.date_brewed and brew.bottling_date %}&lt;p&gt;{% trans %}brewed{% endtrans %}: {{ brew.date_brewed|dateformat("short" )}} &ndash; {% trans %}packaged{% endtrans %}: {{ brew.bottling_date|dateformat("short" )}}&lt;/p&gt;{% endif %}
{% if brew.og and brew.abv %}&lt;p&gt;{% trans %}OG{% endtrans %}: {{ '%.1f' % brew.og }}&deg;Blg / {% trans %}alc. vol.{% endtrans %}: {{ '%.1f' % brew.abv }}%&lt;/p&gt;{% endif %}
{% endraw %}
</pre>
<p>[1] <a href="http://jinja.pocoo.org/docs/templates/">{% trans %}Jinja2 Template Designer Documentation{% endtrans %}</a></p>
{% endblock %}